name: Fully Dynamic Deployment

on:
  workflow_dispatch:
    inputs:
      region:
        description: 'Enter region (e.g., us-east, us-west, azure-central)'
        type: string
        required: true
      
      environment:
        description: 'Enter environment (e.g., dev, qa, uat, prod)'
        type: string
        required: true
      
      cluster:
        description: 'Enter AKS cluster name'
        type: string
        required: true
      
      app_version:
        description: 'Enter application version'
        type: string
        required: false

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      
      - name: Display inputs
        run: |
          echo "Region: ${{ inputs.region }}"
          echo "Environment: ${{ inputs.environment }}"
          echo "Cluster: ${{ inputs.cluster }}"
          echo "Version: ${{ inputs.app_version }}"
      
      - name: Optional - Validate inputs
        run: |
          # Add any validation logic if needed
          if [[ -z "${{ inputs.region }}" ]]; then
            echo "Region cannot be empty"
            exit 1
          fi
      
      - name: Deploy
        run: |
          # Use the dynamic inputs
          echo "Deploying to ${{ inputs.cluster }} in ${{ inputs.region }}"
